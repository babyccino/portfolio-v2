---
import { getCollection } from "astro:content"

import Layout from "../../../layouts/Layout.astro"

const collection = await getCollection("projects")
const experience = await Promise.all(
  collection.map(async entry => ({
    ...entry,
    content: await entry.render(),
  })),
)

const formatDate = (date: string) => {
  if (date === "Present") return "Present"
  const d = new Date(date)
  return `${d.toLocaleString("default", { month: "long" })} ${d.getFullYear()}`
}
---

<Layout title="Gus Ryan | Projects">
  <main id="experience" class="flex flex-col min-h-screen justify-center pl-24">
    <ul class="space-y-4 my-20 group">
      {
        experience.map(entry => (
          <li class="group-hover:opacity-60 hover:!opacity-100 relative hover:bg-slate-400 hover:bg-opacity-15 rounded-xl p-4 transition">
            <a class="block text-sm text-gray-400" href={`/portfolio/projects/${entry.slug}`}>
              <h3 class="text-base text-gray-200">{entry.data.title}</h3>
              <div class="mt-1">
                <entry.content.Content />
              </div>
              <ul class="mt-2 text-xs text-gray-400 space-x-2">
                {entry.data.technologies.map((tech: string) => (
                  <li class="inline-block bg-slate-400 bg-opacity-15 rounded-full px-2 py-1">
                    {tech}
                  </li>
                ))}
              </ul>
            </a>
          </li>
        ))
      }
    </ul>
  </main>
</Layout>
